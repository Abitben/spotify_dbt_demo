version: 2

models:
  - name: stg_tracks_pop
    columns:
      - name: track_id
        tests:
          - not_null
          - unique
      - name: track_name
        tests:
          - not_null
      - name: track_popularity
        tests:
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
          - not_null
    unique_key: track_id
    relationships:
      - name: artists
        columns:
          - artist_id

  - name: stg_track_features
    columns:
      - name: track_id
        tests:
          - not_null
          - unique
      - name: danceability
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: energy
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: key_sign
        tests:
          - not_null
      - name: loudness
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: mode
        tests:
          - not_null
      - name: speechiness
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: acousticness
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: instrumentalness
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: liveness
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: valence
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: tempo
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: track_duration
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
      - name: time_signature
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
    unique_key: track_id
    relationships:
      - name: tracks
        columns:
          - track_id

  - name: stg_artists
    columns:
      - name: artist_id
        tests:
          - not_null
          - unique
      - name: artist_name
        tests:
          - not_null
      - name: artist_genres
      - name: sp_followers
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
      - name: artist_popularity
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
    unique_key: artist_id

  - name: stg_albums
    columns:
      - name: album_id
        tests:
          - not_null
      - name: artist_id
        tests:
          - not_null
      - name: album_name
        tests:
          - not_null
      - name: album_type
        tests:
          - not_null
      - name: available_markets
      - name: release_date
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: date
      - name: total_tracks
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
    relationships:
      - name: artists
        columns:
          - artist_id

  - name: stg_albums_track
    columns:
      - name: track_id
        tests:
          - not_null
      - name: album_id
        tests:
          - not_null
      - name: track_name
        tests:
          - not_null
      - name: artist
      - name: artist_id
        tests:
          - not_null
      - name: disc_number
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
      - name: track_number
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: INT64
      - name: explicit
        tests:
          - not_null
      - name: track_duration
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: FLOAT64
    unique_key: track_id
    relationships:
      - name: tracks
        columns:
          - track_id
      - name: albums
        columns:
          - album_id
